<!DOCTYPE html>
<html>
<head>
    <title>Stantz Demo</title>
    <script type="text/javascript" src="jquery/jquery.js"></script>
    <script type="text/javascript" src="stantz/stantz.js"></script>
    <script type="text/javascript" src="scene.js"></script>

    <link id="bespin_base" href="bespin">
    <link rel="stylesheet" type="text/css" href="bespin/BespinEmbedded.css">
    <script type="text/javascript" src="bespin/BespinEmbedded.js"></script>
</head>
<body>
    <h1>Stantz Demo</h1>
    <canvas id="output" width="640" height="480"></canvas>
    <p>Scene JSON source:
        <input id="renderScene" type="button" value="Re-render">
        <span id="renderStatus">Rendering...</span></p>

    <div id="sceneSrc" style="height: 20em; width: 95%;"></div>

    <!--<script type="text/javascript" src="demo.simple.js"></script>-->
    <script type="text/javascript" src="demo.worker.js"></script>

    <script type="text/javascript">

        var editor;

        window.onBespinLoad = function()
        {
            console.info("Installing bespin with %o", bespin.useBespin);
            bespin.useBespin($("#sceneSrc")[0],
            {
                syntax: "js",
            }
            ).then(function(env)
            {
                editor = env.editor;
                editor.value = JSON.stringify(scene.toJson(), null, 2);
            });
        };

        $("#renderScene").click
        (
            function()
            {
                var sceneSrc = JSON.parse(editor.value);
                scene = stantz.Scene.fromJson(sceneSrc);
                $("#renderStatus").html("Rendering...");
                renderScene();
            }
        );

        var onRenderDone = function()
        {
            $("#renderStatus").html("");
        };

    </script>
</body>
</html>
